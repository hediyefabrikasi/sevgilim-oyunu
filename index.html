<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Sevgilim Beni Ne Kadar Tanƒ±yor? ‚ù§Ô∏è</title>

  <style>
    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overscroll-behavior: none;
    }

    body {
      font-family: "Poppins", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(135deg, #ff758c, #ff4d6d);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: env(safe-area-inset-top) env(safe-area-inset-right)
               env(safe-area-inset-bottom) env(safe-area-inset-left);
      transition: background 0.3s ease;
    }

    .app {
      width: 100%;
      max-width: 430px;
      height: calc(var(--vh, 1vh) * 100);
      max-height: 780px;
      background: rgba(255,255,255,0.18);
      backdrop-filter: blur(14px);
      border-radius: 24px;
      padding: 14px 14px 16px;
      box-shadow: 0 16px 40px rgba(0,0,0,0.25);
      color: #fff;
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .header {
      flex-shrink: 0;
      text-align: center;
      margin-bottom: 8px;
    }

    .title {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      margin-bottom: 8px;
      font-size: 12px;
      font-weight: 500;
    }

    .pill {
      background: rgba(255,255,255,0.25);
      border-radius: 999px;
      padding: 4px 10px;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      min-width: 54px;
      justify-content: center;
    }

    .theme-selector {
      display: flex;
      gap: 6px;
    }

    .theme-btn {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      border: 2px solid rgba(255,255,255,0.7);
      cursor: pointer;
      opacity: 0.9;
    }

    .theme-btn.active {
      outline: 2px solid #fff;
      opacity: 1;
    }

    .progress-wrap {
      width: 100%;
      height: 6px;
      background: rgba(255,255,255,0.25);
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 10px;
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #fff, #ffd6e2);
      transition: width 0.3s ease;
    }

    #screen {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .card {
      width: 100%;
      background: rgba(255,255,255,0.96);
      border-radius: 20px;
      padding: 14px 12px;
      color: #ff2f5a;
      text-align: center;
      box-shadow: 0 10px 28px rgba(0,0,0,0.18);
      animation: fadeUp 0.35s ease;
      display: flex;
      flex-direction: column;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .photo-wrap {
      width: 100%;
      border-radius: 14px;
      overflow: hidden;
      margin-bottom: 10px;
      background: #eee;
      aspect-ratio: 4 / 3;
      flex-shrink: 0;
    }

    .photo {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .question {
      font-size: 14.5px;
      font-weight: 600;
      margin-bottom: 10px;
      color: #ff2f5a;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: auto;
    }

    button.option-btn {
      border: none;
      border-radius: 14px;
      padding: 12px 14px;
      font-size: 14.5px;
      font-weight: 600;
      background: linear-gradient(135deg, #ff4d6d, #ff758c);
      color: #fff;
      cursor: pointer;
      box-shadow: 0 6px 14px rgba(0,0,0,0.18);
      transition: transform 0.1s ease, box-shadow 0.1s ease, opacity 0.1s ease;
      min-height: 44px;
    }

    button.option-btn:active {
      transform: scale(0.97);
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }

    button.option-btn.disabled {
      pointer-events: none;
      opacity: 0.6;
    }

    .wrong-screen h2 {
      margin: 4px 0 6px;
      font-size: 18px;
      color: #ff4d6d;
    }

    .wrong-message {
      font-size: 13.5px;
      margin-bottom: 12px;
      color: #ff2f5a;
    }

    .restart-btn, .start-btn {
      border: none;
      border-radius: 14px;
      padding: 12px 16px;
      font-size: 14.5px;
      font-weight: 600;
      background: linear-gradient(135deg, #ff4d6d, #ff758c);
      color: #fff;
      cursor: pointer;
      box-shadow: 0 6px 14px rgba(0,0,0,0.18);
      min-height: 44px;
    }

    .final-screen h1 {
      margin: 4px 0 6px;
      font-size: 20px;
      color: #ff2f5a;
    }

    .final-message {
      font-size: 14px;
      margin: 8px 0;
      color: #ff4d6d;
    }

    .signature {
      font-size: 13.5px;
      margin-top: 6px;
      color: #ff758c;
    }

    .heart {
      font-size: 44px;
      animation: pulse 1.1s infinite;
      margin-bottom: 6px;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }

    .confetti {
      position: absolute;
      top: -12px;
      width: 8px;
      height: 8px;
      opacity: 0.85;
      animation: fall 2.8s linear forwards;
      border-radius: 2px;
      pointer-events: none;
    }

    @keyframes fall {
      to {
        transform: translateY(800px) rotate(360deg);
        opacity: 0;
      }
    }

    .intro-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 6px;
      color: #ff2f5a;
    }

    .intro-message {
      font-size: 13.5px;
      margin-bottom: 12px;
      color: #ff4d6d;
    }

    .timer {
      font-weight: 700;
    }

    .score {
      font-weight: 700;
    }

    .stars {
      display: flex;
      justify-content: center;
      gap: 4px;
      margin: 6px 0;
      font-size: 22px;
    }
  </style>
</head>
<body>

<div class="app">
  <div class="header">
    <div class="title">‚ù§Ô∏è Sevgilim Beni Ne Kadar Tanƒ±yor?</div>
    <div class="top-bar">
      <div class="pill">‚è± <span id="timer">-</span>s</div>
      <div class="pill">‚≠ê <span id="score">0</span></div>
      <div class="theme-selector" id="themeSelector"></div>
    </div>
    <div class="progress-wrap">
      <div class="progress-bar" id="progressBar"></div>
    </div>
  </div>
  <div id="screen"></div>
</div>

<!-- üéµ AUDIO -->
<audio id="bgMusic" preload="auto" loop></audio>
<audio id="correctSound" preload="auto"></audio>
<audio id="wrongSound" preload="auto"></audio>
<audio id="clickSound" preload="auto"></audio>

<script>
/* ==========================
   üéØ Kƒ∞≈ûƒ∞SELLE≈ûTƒ∞RME ALANI
   ========================== */
const gameData = {
  playerName: "Oƒüuzhan",
  senderName: "Didem",
  introMessage: "Hazƒ±r mƒ±sƒ±n? Bakalƒ±m beni ger√ßekten ne kadar tanƒ±yorsun üòè‚ù§Ô∏è",

  settings: {
    timePerQuestion: 10
  },

  themes: {
    romantic: {
      name: "Romantik",
      bg: "linear-gradient(135deg, #ff758c, #ff4d6d)",
      cardBg: "rgba(255,255,255,0.96)",
      primary: "#ff4d6d"
    },
    night: {
      name: "Gece",
      bg: "linear-gradient(135deg, #1f1c2c, #928dab)",
      cardBg: "rgba(255,255,255,0.94)",
      primary: "#6c63ff"
    },
    pastel: {
      name: "Pastel",
      bg: "linear-gradient(135deg, #fbc2eb, #a6c1ee)",
      cardBg: "rgba(255,255,255,0.96)",
      primary: "#7c83fd"
    }
  },

  defaultTheme: "romantic",

  audio: {
    bgMusic: "audios/bg.mp3",
    correct: "audios/correct.mp3",
    wrong: "audios/wrong.mp3",
    click: "audios/click.mp3"
  },

  questions: [
    {
      image: "images/q1.jpg",
      question: "Bu fotoƒüraf hangi anƒ±mƒ±zdan? üì∏",
      options: ["ƒ∞lk bulu≈ümamƒ±z", "Doƒüum g√ºn√º s√ºrprizim"],
      correct: 0,
      wrongMessage: "Hayƒ±r üòÖ O g√ºn√º unutamazsƒ±n!"
    },
    {
      image: "images/q2.jpg",
      question: "Burada en √ßok ne yapƒ±yorduk? üíï",
      options: ["Gezmeye √ßƒ±kmƒ±≈ütƒ±k", "Film izliyorduk"],
      correct: 0,
      wrongMessage: "Yanlƒ±≈ü üòè Ba≈ütan deneyelim."
    },
    {
      image: "images/q3.jpg",
      question: "Bu fotoƒüraf hangi ≈üehirde √ßekildi? üåç",
      options: ["ƒ∞stanbul", "ƒ∞zmir"],
      correct: 0,
      wrongMessage: "Olmadƒ± üòÖ Ba≈ütan."
    },
    {
      image: "images/q4.jpg",
      question: "Bu anƒ± kim √ßekmi≈üti? üì∑",
      options: ["Arkada≈üƒ±mƒ±z", "Garson"],
      correct: 1,
      wrongMessage: "Yanlƒ±≈ü üòè Ba≈ütan."
    },
    {
      image: "images/q5.jpg",
      question: "Bu fotoƒüraftan sonra nereye gitmi≈ütik? ‚úàÔ∏è",
      options: ["Yemeƒüe", "Sinemaya"],
      correct: 0,
      wrongMessage: "Hayƒ±r üòÖ Ba≈ütan."
    },
    {
      image: "images/q6.jpg",
      question: "Bu fotoƒüraftaki halimi neden seviyordun? üòç",
      options: ["G√ºl√º≈ü√ºm", "Bakƒ±≈üƒ±m"],
      correct: 0,
      wrongMessage: "Yanlƒ±≈ü üòè Ba≈ütan."
    },
    {
      image: "images/q7.jpg",
      question: "Bu g√ºn√º nasƒ±l hatƒ±rlƒ±yorsun? üíå",
      options: ["√áok romantikti", "√áok eƒülenceliydi"],
      correct: 0,
      wrongMessage: "Bence romantikti üòè Ba≈ütan."
    },
    {
      image: "images/q8.jpg",
      question: "Bu fotoƒüraf hangi mevsimde √ßekildi? üçÇüå∏",
      options: ["Sonbahar", "ƒ∞lkbahar"],
      correct: 1,
      wrongMessage: "Yanlƒ±≈ü üòÖ Ba≈ütan."
    },
    {
      image: "images/q9.jpg",
      question: "Burada en √ßok neyi konu≈üuyorduk? üí¨",
      options: ["Gelecek planlarƒ±mƒ±zƒ±", "O g√ºn√º"],
      correct: 0,
      wrongMessage: "Hayƒ±r üòè Ba≈ütan."
    },
    {
      image: "images/q10.jpg",
      question: "Bu oyunu kim hazƒ±rladƒ±? üòç",
      options: ["Ben", "Seni √ßok seven sevgilin ‚ù§Ô∏è"],
      correct: 1,
      wrongMessage: "Bu soru ka√ßmaz üòÖ Ba≈ütan."
    }
  ],

  finalTitle: "Tebrikler! üéâ",
  finalMessage: "Beni ger√ßekten √ßok iyi tanƒ±yorsun ‚ù§Ô∏è ƒ∞yi ki varsƒ±n!"
};
/* ========================== */

const screen = document.getElementById("screen");
const progressBar = document.getElementById("progressBar");
const timerEl = document.getElementById("timer");
const scoreEl = document.getElementById("score");
const themeSelector = document.getElementById("themeSelector");

const bgMusic = document.getElementById("bgMusic");
const correctSound = document.getElementById("correctSound");
const wrongSound = document.getElementById("wrongSound");
const clickSound = document.getElementById("clickSound");

let currentIndex = 0;
let score = 0;
let timer = null;
let timeLeft = gameData.settings.timePerQuestion;
let currentTheme = gameData.defaultTheme;
let audioUnlocked = false;

/* ---------- MOBILE VIEWPORT FIX ---------- */
function setVH() {
  const vh = window.innerHeight * 0.01;
  document.documentElement.style.setProperty("--vh", `${vh}px`);
}
window.addEventListener("resize", setVH);
setVH();

/* ---------- AUDIO SETUP (Mobile Safe) ---------- */
function unlockAudio() {
  if (audioUnlocked) return;
  audioUnlocked = true;
  bgMusic.src = gameData.audio.bgMusic;
  correctSound.src = gameData.audio.correct;
  wrongSound.src = gameData.audio.wrong;
  clickSound.src = gameData.audio.click;
  bgMusic.volume = 0.35;
  correctSound.volume = 0.7;
  wrongSound.volume = 0.7;
  clickSound.volume = 0.6;
  bgMusic.play().then(() => bgMusic.pause()).catch(()=>{});
}

/* ---------- THEME ---------- */
function applyTheme(themeKey) {
  const theme = gameData.themes[themeKey];
  if (!theme) return;
  currentTheme = themeKey;
  document.body.style.background = theme.bg;
  document.querySelectorAll(".option-btn, .start-btn, .restart-btn").forEach(btn => {
    btn.style.background = `linear-gradient(135deg, ${theme.primary}, ${theme.primary}cc)`;
  });
  document.querySelectorAll(".card").forEach(card => {
    card.style.background = theme.cardBg;
  });
  document.querySelectorAll(".theme-btn").forEach(btn => {
    btn.classList.toggle("active", btn.dataset.theme === themeKey);
  });
}

function buildThemeSelector() {
  themeSelector.innerHTML = "";
  Object.entries(gameData.themes).forEach(([key, theme]) => {
    const btn = document.createElement("div");
    btn.className = "theme-btn";
    btn.dataset.theme = key;
    btn.title = theme.name;
    btn.style.background = theme.bg;
    btn.onclick = () => {
      unlockAudio();
      playClick();
      applyTheme(key);
    };
    themeSelector.appendChild(btn);
  });
}

/* ---------- PROGRESS ---------- */
function updateProgress() {
  const percent = (currentIndex / gameData.questions.length) * 100;
  progressBar.style.width = percent + "%";
}

/* ---------- TIMER ---------- */
function startTimer() {
  clearInterval(timer);
  timeLeft = gameData.settings.timePerQuestion;
  timerEl.textContent = timeLeft;
  timer = setInterval(() => {
    timeLeft--;
    timerEl.textContent = timeLeft;
    if (timeLeft <= 0) {
      clearInterval(timer);
      playWrong();
      showWrong("S√ºren doldu üòÖ Ba≈ütan deniyoruz ‚ù§Ô∏è");
    }
  }, 1000);
}

/* ---------- SCREENS ---------- */
function showIntro() {
  clearInterval(timer);
  progressBar.style.width = "0%";
  timerEl.textContent = "-";
  scoreEl.textContent = score;
  screen.innerHTML = `
    <div class="card intro-screen">
      <div class="heart">‚ù§Ô∏è</div>
      <div class="intro-title">${gameData.playerName},</div>
      <div class="intro-message">${gameData.introMessage}</div>
      <button class="start-btn" onclick="startGame()">Oyuna Ba≈üla üéÆ</button>
    </div>
  `;
  applyTheme(currentTheme);
}

function startGame() {
  unlockAudio();
  playClick();
  currentIndex = 0;
  score = 0;
  scoreEl.textContent = score;
  bgMusic.currentTime = 0;
  bgMusic.play().catch(()=>{});
  showQuestion();
}

function showQuestion() {
  updateProgress();
  const q = gameData.questions[currentIndex];
  screen.innerHTML = `
    <div class="card">
      <div class="photo-wrap">
        <img class="photo" src="${q.image}" alt="">
      </div>
      <div class="question">${currentIndex + 1}. ${q.question}</div>
      <div class="options">
        <button class="option-btn" onclick="selectOption(0)">${q.options[0]}</button>
        <button class="option-btn" onclick="selectOption(1)">${q.options[1]}</button>
      </div>
    </div>
  `;
  applyTheme(currentTheme);
  startTimer();
}

function disableOptions() {
  document.querySelectorAll(".option-btn").forEach(btn => {
    btn.classList.add("disabled");
  });
}

function selectOption(index) {
  unlockAudio();
  playClick();
  disableOptions();
  clearInterval(timer);
  const q = gameData.questions[currentIndex];
  if (index === q.correct) {
    playCorrect();
    score++;
    scoreEl.textContent = score;
    setTimeout(() => {
      currentIndex++;
      if (currentIndex < gameData.questions.length) {
        showQuestion();
      } else {
        showFinal();
      }
    }, 450);
  } else {
    playWrong();
    setTimeout(() => {
      showWrong(q.wrongMessage);
    }, 450);
  }
}

function showWrong(message) {
  clearInterval(timer);
  screen.innerHTML = `
    <div class="card wrong-screen">
      <div class="heart">üíî</div>
      <h2>Yanlƒ±≈ü Cevap</h2>
      <div class="wrong-message">${message}</div>
      <button class="restart-btn" onclick="showIntro()">Ba≈üa D√∂n üîÑ</button>
    </div>
  `;
  applyTheme(currentTheme);
}

function showFinal() {
  clearInterval(timer);
  progressBar.style.width = "100%";
  bgMusic.pause();
  const stars = getStars(score, gameData.questions.length);
  screen.innerHTML = `
    <div class="card final-screen">
      <div class="heart">‚ù§Ô∏è</div>
      <h1>${gameData.finalTitle}</h1>
      <div class="stars">${stars}</div>
      <div class="final-message">${gameData.finalMessage}</div>
      <div class="signature">‚Äî ${gameData.senderName}</div>
    </div>
  `;
  applyTheme(currentTheme);
  launchConfetti();
}

/* ---------- STARS ---------- */
function getStars(score, total) {
  const ratio = score / total;
  if (ratio === 1) return "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê";
  if (ratio >= 0.8) return "‚≠ê‚≠ê‚≠ê‚≠ê";
  if (ratio >= 0.6) return "‚≠ê‚≠ê‚≠ê";
  if (ratio >= 0.4) return "‚≠ê‚≠ê";
  return "‚≠ê";
}

/* ---------- CONFETTI ---------- */
function launchConfetti() {
  const app = document.querySelector(".app");
  for (let i = 0; i < 36; i++) {
    const confetti = document.createElement("div");
    confetti.className = "confetti";
    confetti.style.left = Math.random() * 100 + "%";
    confetti.style.background = `hsl(${Math.random()*360}, 80%, 60%)`;
    confetti.style.animationDuration = (Math.random() * 2 + 2.5) + "s";
    app.appendChild(confetti);
  }
}

/* ---------- AUDIO HELPERS ---------- */
function playCorrect() {
  correctSound.currentTime = 0;
  correctSound.play().catch(()=>{});
}

function playWrong() {
  wrongSound.currentTime = 0;
  wrongSound.play().catch(()=>{});
}

function playClick() {
  clickSound.currentTime = 0;
  clickSound.play().catch(()=>{});
}

/* ---------- INIT ---------- */
buildThemeSelector();
applyTheme(currentTheme);
showIntro();
</script>

</body>
</html>
